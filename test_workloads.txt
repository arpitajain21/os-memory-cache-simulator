OS MEMORY AND CACHE SIMULATOR
Sample Input Workloads and Expected Behavior
============================================

NOTE:
Each workload is an independent test case.
Commands are entered via the CLI exactly as shown.


--------------------------------------------------
WORKLOAD 1: Physical Memory Initialization
--------------------------------------------------

Commands:
init memory 1024

Expected Behavior:
- A contiguous block of physical memory of size 1024 bytes is created
- All memory is initially free
- Allocation counters are reset


--------------------------------------------------
WORKLOAD 2: First Fit Allocation
--------------------------------------------------

Commands:
init memory 1024
set allocator first_fit
malloc 100
malloc 200
dump
stats

Expected Behavior:
- First Fit strategy is used
- Blocks are allocated sequentially from the beginning
- Memory blocks are split correctly
- No internal or external fragmentation initially

Expected Memory Layout (approximate):
[0 - 99]    USED (id=1)
[100 - 299] USED (id=2)
[300 - 1023] FREE

Expected Metrics:
Used Memory = 300
Free Memory = 724
Internal Fragmentation = 0
External Fragmentation = 0


--------------------------------------------------
WORKLOAD 3: Deallocation and Coalescing
--------------------------------------------------

Commands:
free 1
dump
stats

Expected Behavior:
- Block with id=1 is freed
- Adjacent free blocks are merged (coalescing)
- External fragmentation may change

Expected Memory Layout (approximate):
[0 - 99]    FREE
[100 - 299] USED (id=2)
[300 - 1023] FREE


--------------------------------------------------
WORKLOAD 4: Best Fit Allocation Strategy
--------------------------------------------------

Commands:
init memory 1024
set allocator best_fit
malloc 100
malloc 300
malloc 200
free 2
malloc 180
dump
stats

Expected Behavior:
- Best Fit selects the smallest suitable free block
- Allocation occurs inside the 300-byte hole
- Block splitting is performed
- Fragmentation behavior differs from First Fit

Expected Memory Layout (approximate):
[0 - 99]    USED
[100 - 279] USED
[280 - 399] FREE
[400 - 599] USED
[600 - 1023] FREE


--------------------------------------------------
WORKLOAD 5: Worst Fit Allocation Strategy
--------------------------------------------------

Commands:
init memory 1024
set allocator worst_fit
malloc 100
malloc 300
malloc 200
free 2
malloc 180
dump
stats

Expected Behavior:
- Worst Fit selects the largest available free block
- Allocation is made from the largest hole
- Fragmentation pattern differs from Best Fit


--------------------------------------------------
WORKLOAD 6: Allocation Failure Handling
--------------------------------------------------

Commands:
init memory 256
set allocator first_fit
malloc 200
malloc 100

Expected Behavior:
- First allocation succeeds
- Second allocation fails due to insufficient memory
- Failed allocation counter increases
- Simulator continues running safely


--------------------------------------------------
WORKLOAD 7: Invalid Deallocation (Error Handling)
--------------------------------------------------

Commands:
free 99

Expected Behavior:
- Block id does not exist
- Simulator prints "Invalid block id"
- Program does not crash


--------------------------------------------------
WORKLOAD 8: Metrics and Statistics Reporting
--------------------------------------------------

Commands:
stats

Expected Behavior:
- Simulator reports:
  - Total memory
  - Used memory
  - Free memory
  - Internal fragmentation
  - External fragmentation
  - Memory utilization
  - Allocation success/failure counts


--------------------------------------------------
WORKLOAD 9: Cache Simulation (Multilevel Cache)
--------------------------------------------------

Commands:
exit

Expected Behavior:
- CLI exits
- Cache simulation starts automatically
- L1 cache is accessed first
- On L1 miss, access propagates to L2
- Cache hit and miss counts are displayed

Expected Output (approximate):

Running Cache Simulation...

--- L1 Cache Stats ---
Hits: <value>
Misses: <value>
Hit Ratio: <percentage>

--- L2 Cache Stats ---
Hits: <value>
Misses: <value>
Hit Ratio: <percentage>


--------------------------------------------------
END OF TEST WORKLOADS
--------------------------------------------------
